<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Newser Lite</title>
    <style>
        :root { --ios-bg: #000; --ios-card: #1c1c1e; --ios-text: #fff; --separator: #38383a; --accent: #0a84ff; }
        body { font-family: -apple-system, sans-serif; background: var(--ios-bg); color: var(--ios-text); padding: 20px; margin: 0; }
        .stats { display: flex; gap: 10px; margin: 20px 0; }
        .pill { background: var(--ios-card); padding: 12px 18px; border-radius: 25px; font-size: 16px; font-weight: 700; border: 1px solid var(--separator); }
        .list { background: var(--ios-card); border-radius: 12px; overflow: hidden; }
        .item { padding: 28px 22px; border-bottom: 0.5px solid var(--separator); display: block; color: var(--ios-text); text-decoration: none; }
        .item:last-child { border-bottom: none; }
        /* LARGE HEADLINES */
        .title { font-size: 26px; font-weight: 700; line-height: 1.35; margin-bottom: 8px; }
        .time { font-size: 16px; color: #8e8e93; }
    </style>
</head>
<body>
    <h1>Newser</h1>
    <div class="stats">
        <div id="ax-pill" class="pill">Axios: 0</div>
        <div id="mem-pill" class="pill">Memo: 0</div>
    </div>
    <div id="feed" class="list">Loading...</div>

    <script>
        const API_URL = "https://script.google.com/macros/s/AKfycbyLYvUaKUZ2QLz0qFtXnl7fbZ7-EyX9w0HLQ-G2Y5hWqBEPPk0GHzzTjebaHdn4ZVupTA/exec";

        async function loadNews() {
            const feed = document.getElementById('feed');
            try {
                const res = await fetch(API_URL);
                const data = await res.json();
                
                document.getElementById('ax-pill').innerText = `Axios: ${data.axiosCount || 0}`;
                document.getElementById('mem-pill').innerText = `Memo: ${data.memoCount || 0}`;
                
                if (!data.articles || data.articles.length === 0) {
                    feed.innerHTML = '<div style="padding:40px; text-align:center;">No new articles.</div>';
                    return;
                }

                feed.innerHTML = '';
                data.articles.reverse().forEach(a => {
                    const div = document.createElement('a');
                    div.className = 'item';
                    div.href = a.link;
                    div.target = "_blank";
                    const time = new Date(a.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                    div.innerHTML = `<div class="title">${a.title}</div><div class="time">${time}</div>`;
                    feed.appendChild(div);
                });
            } catch (e) { feed.innerText = "Error loading data."; }
        }
        loadNews();
    </script>
</body>
</html>
